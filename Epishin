#include <avr/io.h>
#include <avr/interrupt.h>

int ii=1 << 10;
int main(void)
{
	DDRB=0xFF;//порт В на вывод
	DDRA=0xFF;//прот \а на вывод
	TCCR1A |= ((1<<WGM12) | (1 << CS10) | (1 << CS11)) ; // таймер в режим сброс по сравнению ВГМ, предделитель на 64 ЦС
	OCR1A= 15624; //число, на котором сбросить таймер
	TIMSK|= (1<<OCIE1A); //разрешить прерывание от таймера по сравнению
	sei(); // разрешить все прерывания
   
}

ISR(TIMER1_COMPA_vect){ //обработчик прерывания таймера по сравнению
	ii >>=1;
	if(!ii) ii=1<<9;
	PORTA=0x0F - ((ii & 0x0F00)>>6);
	PORTB=0xFF -ii;
}
